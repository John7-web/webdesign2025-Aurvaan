<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Neptune</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
      overflow-x: hidden;
      background: #000;
      color: #ddd;
      font-family: system-ui, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* 3D viewer container */
    #viewer {
      width: 100%;
      height: 60vh;
      min-height: 420px;
      position: relative;
      background: radial-gradient(ellipse at center, #02030a 0%, #000 60%);
      overflow: hidden;
      transition: height 360ms ease;
    }

    #info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: #ccc;
      font-size: 13px;
      opacity: 0.95;
      z-index: 10;
      text-align: center;
      pointer-events: none;
    }

    /* Research / content area */
    #content {
      max-width: 920px;
      margin: 24px auto 72px;
      padding: 20px 22px;
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.6);
      color: #ddd;
      line-height: 1.6;
    }

    #content h1, #content h2 { color: #fff; margin: 0.8rem 0 0.4rem; }
    #content p, #content ul { margin: 0.5rem 0; color: #cfd8dc; }
    #content ul { padding-left: 1.2rem; }
    #content small { color: #9ea7ab; }
  </style>
</head>
<body>
<div id="viewer">
  <div id="info">Neptune<br>Drag = rotate • Scroll = zoom</div>
</div>

<div id="content">
  <h1>Neptune — In-depth Overview</h1>
  <p>Neptune is the eighth planet from the Sun and a deep blue ice giant with a dynamic atmosphere and the strongest sustained winds in the Solar System. This section covers Neptune's formation, interior, atmosphere, ring system, moons, and exploration.</p>

  <h2>Formation & Evolution</h2>
  <p>Neptune formed in the outer regions of the protoplanetary disk about 4.5 billion years ago. Its composition and large distance from the Sun suggest it accumulated substantial ices (water, ammonia, methane) and gases, likely migrating to its current orbit during early Solar System evolution.</p>

  <h2>Internal Structure</h2>
  <p>Neptune likely has a small rocky core surrounded by a thick 'mantle' of water/ammonia-rich ices and a hydrogen/helium atmosphere. High pressures in the deep interior may create exotic phases and contribute to the planet's heat and magnetic field.</p>

  <h2>Atmosphere & Weather</h2>
  <p>Neptune's atmosphere is rich in methane, which gives it a blue color. The planet exhibits large storms (e.g., the Great Dark Spot observed by Voyager 2), supersonic winds, and dynamically evolving cloud patterns driven by internal heat.</p>

  <h2>Rings & Moons</h2>
  <p>Neptune has a faint ring system and 14 known moons; Triton is the largest and geologically active, likely a captured Kuiper Belt object with geysers and a retrograde orbit.</p>

  <h2>Magnetosphere</h2>
  <p>Neptune's magnetic field is complex and offset from the planet's center, interacting with solar wind and generating magnetospheric dynamics that differ from the giant planets closer to the Sun.</p>

  <h2>Exploration & Science</h2>
  <p>Voyager 2 is the only spacecraft to have flown by Neptune, providing most of our detailed knowledge. Future missions and telescope observations continue to study Neptune's atmosphere, moons, and ring dynamics.</p>

  <h2>Quick Facts</h2>
  <ul>
    <li>Mean radius: ~24,622 km</li>
    <li>Mass: ~1.02 × 10<sup>26</sup> kg</li>
    <li>Rotation period: ~16.11 hours</li>
    <li>Main atmospheric gas: H₂, He, with methane traces</li>
    <li>Number of known moons: 14</li>
  </ul>

  <p><small>Sources: Voyager 2 data, Hubble observations, NASA planetary science literature.</small></p>
</div>

<!-- Three.js r124 (NO modules) -->
<script src="https://cdn.jsdelivr.net/npm/three@0.124.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.124.0/examples/js/controls/OrbitControls.js"></script>

<script>
  var scene = new THREE.Scene();

  var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);
  camera.position.set(0, 1.6, 6);

  var viewer = document.getElementById('viewer');

  var renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(viewer.clientWidth, viewer.clientHeight);
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.outputEncoding = THREE.sRGBEncoding;
  renderer.domElement.style.display = 'block';
  viewer.appendChild(renderer.domElement);

  // Ensure camera uses viewer aspect ratio
  camera.aspect = viewer.clientWidth / viewer.clientHeight;
  camera.updateProjectionMatrix();

  var controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.enablePan = false;

  // ===================== LIGHTING =====================

  var sunLight = new THREE.DirectionalLight(0xffffff, 2.5);
  scene.add(sunLight);
  scene.add(new THREE.AmbientLight(0x111111));

  // ===================== SUN =====================

  var sun = new THREE.Mesh(
    new THREE.SphereGeometry(0, 0, 0),
    new THREE.MeshBasicMaterial({
      map: new THREE.TextureLoader().load('https://threejs.org/examples/textures/planets/sun.jpg')
    })
  );
  scene.add(sun);

  // ===================== Mars =====================

  var loader = new THREE.TextureLoader();

  var neptune = new THREE.Mesh(
    new THREE.SphereGeometry(1.5, 64, 64),
    new THREE.MeshPhongMaterial({
      map: loader.load('https://th.bing.com/th/id/OIP.MZnPDCFiIJSOt_Z2oJOBzQHaDt?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3'),
      normalMap: loader.load('https://tse3.mm.bing.net/th/id/OIP.Keb6k3Mi-rV6i1v8h-IXRgHaHa?cb=ucfimg2&ucfimg=1&w=826&h=826&rs=1&pid=ImgDetMain&o=7&rm=3')
    })
  );
  // keep geometry & texture unchanged; Neptune axial tilt ~28.32° (cosmetic)
  neptune.rotation.z = THREE.Math.degToRad(28.32);
  scene.add(neptune);

  // ===================== NO NIGHT TEXTURE =====================

  // City/night texture removed completely

  var cityLights = null;

  // ===================== STARS =====================

  var starsGeo = new THREE.BufferGeometry();
  var starCount = 12000;
  var positions = new Float32Array(starCount * 3);

  for (var i = 0; i < starCount * 3; i++) {
    positions[i] = (Math.random() - 0.5) * 4000;
  }

  starsGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));

  var stars = new THREE.Points(
    starsGeo,
    new THREE.PointsMaterial({
      color: 0xffffff,
      size: 0.7,
      sizeAttenuation: true
    })
  );

  scene.add(stars);

  // ===================== ASTRONOMY =====================

  var cycleStart = Date.now();
  var CYCLE_DURATION = 15000;

  function updateSun() {
    var elapsed = (Date.now() - cycleStart) % CYCLE_DURATION;
    var angle = (elapsed / CYCLE_DURATION) * Math.PI * 2;

    var x = Math.cos(angle) * 10;
    var z = Math.sin(angle) * 10;

    sun.position.set(x, 0, z);
    sunLight.position.copy(sun.position);

    var dayFactor = THREE.Math.clamp((x / 10 + 1) / 2, 0, 1);
    // no night texture to fade
  }

  // ===================== RESIZE =====================

  window.addEventListener('resize', function () {
    renderer.setSize(viewer.clientWidth, viewer.clientHeight);
    camera.aspect = viewer.clientWidth / viewer.clientHeight;
    camera.updateProjectionMatrix();
  });

  // ===================== LOOP =====================

  function animate() {
    requestAnimationFrame(animate);

    neptune.rotation.y += 0.0007;

    neptune.position.set(0, 0, 0);
    // no night texture

    updateSun();

    controls.update();
    renderer.render(scene, camera);
  }

  animate();
</script>
</body>
</html>
