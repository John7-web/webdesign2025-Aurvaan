<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mars</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
      overflow-x: hidden;
      background: #000;
      color: #ddd;
      font-family: system-ui, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* 3D viewer container */
    #viewer {
      width: 100%;
      height: 60vh;
      min-height: 420px;
      position: relative;
      background: radial-gradient(ellipse at center, #04040a 0%, #000 60%);
      overflow: hidden;
      transition: height 360ms ease;
    }

    #info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: #ccc;
      font-size: 13px;
      opacity: 0.95;
      z-index: 10;
      text-align: center;
      pointer-events: none;
    }

    /* Research / content area */
    #content {
      max-width: 920px;
      margin: 24px auto 72px;
      padding: 20px 22px;
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.6);
      color: #ddd;
      line-height: 1.6;
    }

    #content h1, #content h2 { color: #fff; margin: 0.8rem 0 0.4rem; }
    #content p, #content ul { margin: 0.5rem 0; color: #cfd8dc; }
    #content ul { padding-left: 1.2rem; }
    #content small { color: #9ea7ab; }
  </style>
</head>
<body>
<div id="viewer">
  <div id="info">Mars<br>Drag = rotate • Scroll = zoom</div>
</div>

<div id="content">
  <h1>Mars — In-depth Overview</h1>
  <p>Mars is the fourth planet from the Sun and the most Earth-like world in the inner Solar System, with seasons, polar ice caps, and a layered landscape shaped by volcanism, impacts, and possible ancient water flows. Below is a concise summary of Mars' formation, structure, atmosphere, surface, climate, moons, and exploration.</p>

  <h2>Formation & Evolution</h2>
  <p>Mars formed about 4.6 billion years ago from the same protoplanetary disk as Earth. It accreted less mass, which led to earlier cooling and geologic inactivity compared to Earth, preserving a record of early solar system processes.</p>

  <h2>Internal Structure</h2>
  <p>Mars has a crust, mantle, and an iron-rich core that may be partially liquid. Its smaller size means heat is lost faster than on Earth, reducing tectonic activity over time.</p>

  <h2>Atmosphere & Climate</h2>
  <p>Martian air is thin (≈0.6% of Earth's surface pressure) and mostly carbon dioxide (≈95%). The planet supports large temperature swings, global dust storms, and past evidence suggests it once had a thicker atmosphere and liquid water at the surface.</p>

  <h2>Surface & Geology</h2>
  <p>Mars features the largest volcano in the Solar System (Olympus Mons), vast canyons (Valles Marineris), ancient river valleys, and extensive basaltic plains. Iron oxide gives Mars its characteristic red color.</p>

  <h2>Water & Ice</h2>
  <p>Water is currently present as ice at the poles and in mid-latitude deposits; subsurface ice is widespread. Geological evidence and mineralogy show Mars had abundant surface water in its past.</p>

  <h2>Moons</h2>
  <p>Phobos and Deimos are small, irregular moons likely captured asteroids. Phobos is decaying inward and may eventually break apart, forming a ring.</p>

  <h2>Exploration & Science</h2>
  <p>Mars has been visited by orbiters, landers, and rovers (e.g., Mariner, Viking, PathFinder, Spirit, Opportunity, Curiosity, Perseverance). Ongoing missions study its geology, climate history, and habitability potential.</p>

  <h2>Quick Facts</h2>
  <ul>
    <li>Mean radius: ~3,389 km</li>
    <li>Mass: ~6.42 × 10<sup>23</sup> kg</li>
    <li>Rotation period: ~24.6 hours</li>
    <li>Main atmospheric gas: CO₂ (~95%)</li>
    <li>Number of moons: 2 (Phobos & Deimos)</li>
  </ul>

  <p><small>Sources: NASA Mars Reconnaissance Orbiter, ESA Mars Express, peer-reviewed planetary science literature.</small></p>
</div>

<!-- Three.js r124 (NO modules) -->
<script src="https://cdn.jsdelivr.net/npm/three@0.124.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.124.0/examples/js/controls/OrbitControls.js"></script>

<script>
  var scene = new THREE.Scene();

  var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);
  camera.position.set(0, 1.6, 6);

  var viewer = document.getElementById('viewer');

  var renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(viewer.clientWidth, viewer.clientHeight);
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.outputEncoding = THREE.sRGBEncoding;
  renderer.domElement.style.display = 'block';
  viewer.appendChild(renderer.domElement);

  // Ensure camera uses viewer aspect ratio
  camera.aspect = viewer.clientWidth / viewer.clientHeight;
  camera.updateProjectionMatrix();

  var controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.enablePan = false; 

  // ===================== LIGHTING =====================

  var sunLight = new THREE.DirectionalLight(0xffffff, 2.5);
  scene.add(sunLight);
  scene.add(new THREE.AmbientLight(0x111111));

  // ===================== SUN =====================

  var sun = new THREE.Mesh(
    new THREE.SphereGeometry(0, 0, 0),
    new THREE.MeshBasicMaterial({
      map: new THREE.TextureLoader().load('https://threejs.org/examples/textures/planets/sun.jpg')
    })
  );
  scene.add(sun);

  // ===================== Mars =====================

  var loader = new THREE.TextureLoader();

  var mars = new THREE.Mesh(
    new THREE.SphereGeometry(2, 64, 64),
    new THREE.MeshPhongMaterial({
      map: loader.load('https://tse3.mm.bing.net/th/id/OIP.sw3DenB-a0_BjabeFZl7lQHaDt?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3'),
      normalMap: loader.load('https://tse3.mm.bing.net/th/id/OIP.Keb6k3Mi-rV6i1v8h-IXRgHaHa?cb=ucfimg2&ucfimg=1&w=826&h=826&rs=1&pid=ImgDetMain&o=7&rm=3')
    })
  );
  // Mars axial tilt ~25.19°
  mars.rotation.z = THREE.Math.degToRad(25.19);
  scene.add(mars);

  // ===================== NO NIGHT TEXTURE =====================

  // City/night texture removed completely

  var cityLights = null;

  // ===================== STARS =====================

  var starsGeo = new THREE.BufferGeometry();
  var starCount = 12000;
  var positions = new Float32Array(starCount * 3);

  for (var i = 0; i < starCount * 3; i++) {
    positions[i] = (Math.random() - 0.5) * 4000;
  }

  starsGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));

  var stars = new THREE.Points(
    starsGeo,
    new THREE.PointsMaterial({
      color: 0xffffff,
      size: 0.7,
      sizeAttenuation: true
    })
  );

  scene.add(stars);

  // ===================== ASTRONOMY =====================

  var cycleStart = Date.now();
  var CYCLE_DURATION = 15000;

  function updateSun() {
    var elapsed = (Date.now() - cycleStart) % CYCLE_DURATION;
    var angle = (elapsed / CYCLE_DURATION) * Math.PI * 2;

    var x = Math.cos(angle) * 10;
    var z = Math.sin(angle) * 10;

    sun.position.set(x, 0, z);
    sunLight.position.copy(sun.position);

    var dayFactor = THREE.Math.clamp((x / 10 + 1) / 2, 0, 1);
    // no night texture to fade
  }

  // ===================== RESIZE =====================

  window.addEventListener('resize', function () {
    renderer.setSize(viewer.clientWidth, viewer.clientHeight);
    camera.aspect = viewer.clientWidth / viewer.clientHeight;
    camera.updateProjectionMatrix();
  });

  // ===================== LOOP =====================

  function animate() {
    requestAnimationFrame(animate);

    mars.rotation.y += 0.0009;

    mars.position.set(0, 0, 0);
    // no night texture

    updateSun();

    controls.update();
    renderer.render(scene, camera);
  }

  animate();
</script>
</body>
</html>
